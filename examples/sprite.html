<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="../bin/jquery.gl.min.js" id=foo></script>

<canvas width=300 height=300 id="c"></canvas>

<script>
  $(document).ready(function() {
    $("#c").gl({
      init: init,
      framerate: 10,
      draw: draw,
      update: function(gl) { gl.x.models().update(); }
    });
  });

function init(gl) {
  gl.x.initDepth();
  var material = //gl.x.material("vs", "fs")
  gl.x.loadMaterial("texture.vs", "texture.fs", function(material) {
    material.p("uP").m("uM").texture("blo.png", "uTex");
    // material must be loaded to use attributes
    sprite = gl.x.sprite(material, 512,512, 250,256, "aTex", "aPos");
//    sprite.setSequence('loop', 0, 3, true);
//    sprite.useSequence('loop');
    sprite.update(function(gl) {
      if (sprite.state == 'walk')
      sprite.nextFrame();
    });

    $('#c').click(function() {
      if (sprite.state == 'rest') {
        sprite.state = 'walk';
        } else {
        sprite.state = 'rest';
      }
    });
  });
}
  function draw(gl) {
    gl.x.clear();
    gl.m.perspective(0.1, 100, 500, 500, 45.0);
    gl.m.i();
    gl.m.translate([1.0, 1.0, -6.0])
    gl.x.models().draw();
  }
</script>
  
