<script src="../bin/jquery.min.js"></script>
<script src="../bin/jquery.gl.min.js" id=foo></script>

<canvas width=300 height=300 id="c"></canvas>
<br>
Animation By Mia Carty
<br>
<br>
Click canvas to play image.

<script>
  $(document).ready(function() {
    $("#c").gl({
      init: init,
      framerate: 12,
      draw: draw,
      update: function(gl) { gl.x.models().update(); }
    });
  });

function init(gl) {
  gl.x.initDepth();
  gl.x.loadMaterial("texture.vs", "texture.fs", function(material) {
    material.p("uP").m("uM").texture("plant_frames.png", "uTex");
    // material must be loaded to use attributes
    var sprite = gl.x.sprite(material,
                             2048, 2048, // Texture size
                             251, 339,   // Frame size
                             "aTex", "aPos");
    sprite.setSequence('wake', 0, 31);
    sprite.useSequence('wake');
    sprite.update(function(gl) {
      if (sprite.state == 'walk') {
        sprite.nextFrame();
      }
    });

    $('#c').click(function() {
      if (sprite.state == 'rest') {
        sprite.state = 'walk';
        } else {
        sprite.state = 'rest';
      }
    });
  });
}
  function draw(gl) {
    gl.x.clear();
    gl.m.perspective(0.1, 100, 500, 500, 45.0);
    gl.m.i();
    gl.m.translate([1.0, 1.0, -6.0])
    gl.x.models().draw();
  }
</script>
  
